var t=function(t){try{return!!t()}catch(t){return!0}},e={}.toString,n=function(t){return e.call(t).slice(8,-1)},r="".split,i=t((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==n(t)?r.call(t,""):Object(t)}:Object,o=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},c=function(t){return i(o(t))},u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var s,f=function(t){return t&&t.Math==Math&&t},l=f("object"==typeof globalThis&&globalThis)||f("object"==typeof window&&window)||f("object"==typeof self&&self)||f("object"==typeof u&&u)||Function("return this")(),h=!t((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),p=function(t){return"object"==typeof t?null!==t:"function"==typeof t},d=l.document,v=p(d)&&p(d.createElement),y=function(t){return v?d.createElement(t):{}},m=!h&&!t((function(){return 7!=Object.defineProperty(y("div"),"a",{get:function(){return 7}}).a})),g=function(t){if(!p(t))throw TypeError(String(t)+" is not an object");return t},b=function(t,e){if(!p(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!p(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!p(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!p(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},w=Object.defineProperty,O={f:h?w:function(t,e,n){if(g(t),e=b(e,!0),g(n),m)try{return w(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},j=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},S=h?function(t,e,n){return O.f(t,e,j(1,n))}:function(t,e,n){return t[e]=n,t},T=function(t,e){try{S(l,t,e)}catch(n){l[t]=e}return e},k=l["__core-js_shared__"]||T("__core-js_shared__",{}),P=a((function(t){(t.exports=function(t,e){return k[t]||(k[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),x={}.hasOwnProperty,E=function(t,e){return x.call(t,e)},A=0,L=Math.random(),M=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++A+L).toString(36)},I=!!Object.getOwnPropertySymbols&&!t((function(){return!String(Symbol())})),R=I&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,_=P("wks"),C=l.Symbol,q=R?C:C&&C.withoutSetter||M,D=function(t){return E(_,t)||(I&&E(C,t)?_[t]=C[t]:_[t]=q("Symbol."+t)),_[t]},F=Math.ceil,G=Math.floor,N=function(t){return isNaN(t=+t)?0:(t>0?G:F)(t)},V=Math.min,z=function(t){return t>0?V(N(t),9007199254740991):0},B=Math.max,H=Math.min,K=function(t,e){var n=N(t);return n<0?B(n+e,0):H(n,e)},U=function(t){return function(e,n,r){var i,o=c(e),u=z(o.length),a=K(r,u);if(t&&n!=n){for(;u>a;)if((i=o[a++])!=i)return!0}else for(;u>a;a++)if((t||a in o)&&o[a]===n)return t||a||0;return!t&&-1}},W={includes:U(!0),indexOf:U(!1)},Y={},X=W.indexOf,J=function(t,e){var n,r=c(t),i=0,o=[];for(n in r)!E(Y,n)&&E(r,n)&&o.push(n);for(;e.length>i;)E(r,n=e[i++])&&(~X(o,n)||o.push(n));return o},Q=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Z=Object.keys||function(t){return J(t,Q)},$=h?Object.defineProperties:function(t,e){g(t);for(var n,r=Z(e),i=r.length,o=0;i>o;)O.f(t,n=r[o++],e[n]);return t},tt=l,et=function(t){return"function"==typeof t?t:void 0},nt=function(t,e){return arguments.length<2?et(tt[t])||et(l[t]):tt[t]&&tt[t][e]||l[t]&&l[t][e]},rt=nt("document","documentElement"),it=P("keys"),ot=function(t){return it[t]||(it[t]=M(t))},ct=ot("IE_PROTO"),ut=function(){},at=function(t){return"<script>"+t+"<\/script>"},st=function(){try{s=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;st=s?function(t){t.write(at("")),t.close();var e=t.parentWindow.Object;return t=null,e}(s):((e=y("iframe")).style.display="none",rt.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(at("document.F=Object")),t.close(),t.F);for(var n=Q.length;n--;)delete st.prototype[Q[n]];return st()};Y[ct]=!0;var ft=Object.create||function(t,e){var n;return null!==t?(ut.prototype=g(t),n=new ut,ut.prototype=null,n[ct]=t):n=st(),void 0===e?n:$(n,e)},lt=D("unscopables"),ht=Array.prototype;null==ht[lt]&&O.f(ht,lt,{configurable:!0,value:ft(null)});var pt=function(t){ht[lt][t]=!0},dt={},vt=Function.toString;"function"!=typeof k.inspectSource&&(k.inspectSource=function(t){return vt.call(t)});var yt,mt,gt,bt=k.inspectSource,wt=l.WeakMap,Ot="function"==typeof wt&&/native code/.test(bt(wt)),jt=l.WeakMap;if(Ot){var St=new jt,Tt=St.get,kt=St.has,Pt=St.set;yt=function(t,e){return Pt.call(St,t,e),e},mt=function(t){return Tt.call(St,t)||{}},gt=function(t){return kt.call(St,t)}}else{var xt=ot("state");Y[xt]=!0,yt=function(t,e){return S(t,xt,e),e},mt=function(t){return E(t,xt)?t[xt]:{}},gt=function(t){return E(t,xt)}}var Et,At,Lt,Mt={set:yt,get:mt,has:gt,enforce:function(t){return gt(t)?mt(t):yt(t,{})},getterFor:function(t){return function(e){var n;if(!p(e)||(n=mt(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},It={}.propertyIsEnumerable,Rt=Object.getOwnPropertyDescriptor,_t={f:Rt&&!It.call({1:2},1)?function(t){var e=Rt(this,t);return!!e&&e.enumerable}:It},Ct=Object.getOwnPropertyDescriptor,qt={f:h?Ct:function(t,e){if(t=c(t),e=b(e,!0),m)try{return Ct(t,e)}catch(t){}if(E(t,e))return j(!_t.f.call(t,e),t[e])}},Dt=a((function(t){var e=Mt.get,n=Mt.enforce,r=String(String).split("String");(t.exports=function(t,e,i,o){var c=!!o&&!!o.unsafe,u=!!o&&!!o.enumerable,a=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||E(i,"name")||S(i,"name",e),n(i).source=r.join("string"==typeof e?e:"")),t!==l?(c?!a&&t[e]&&(u=!0):delete t[e],u?t[e]=i:S(t,e,i)):u?t[e]=i:T(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||bt(this)}))})),Ft=Q.concat("length","prototype"),Gt={f:Object.getOwnPropertyNames||function(t){return J(t,Ft)}},Nt={f:Object.getOwnPropertySymbols},Vt=nt("Reflect","ownKeys")||function(t){var e=Gt.f(g(t)),n=Nt.f;return n?e.concat(n(t)):e},zt=function(t,e){for(var n=Vt(e),r=O.f,i=qt.f,o=0;o<n.length;o++){var c=n[o];E(t,c)||r(t,c,i(e,c))}},Bt=/#|\.prototype\./,Ht=function(e,n){var r=Ut[Kt(e)];return r==Yt||r!=Wt&&("function"==typeof n?t(n):!!n)},Kt=Ht.normalize=function(t){return String(t).replace(Bt,".").toLowerCase()},Ut=Ht.data={},Wt=Ht.NATIVE="N",Yt=Ht.POLYFILL="P",Xt=Ht,Jt=qt.f,Qt=function(t,e){var n,r,i,o,c,u=t.target,a=t.global,s=t.stat;if(n=a?l:s?l[u]||T(u,{}):(l[u]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(c=Jt(n,r))&&c.value:n[r],!Xt(a?r:u+(s?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;zt(o,i)}(t.sham||i&&i.sham)&&S(o,"sham",!0),Dt(n,r,o,t)}},Zt=function(t){return Object(o(t))},$t=!t((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),te=ot("IE_PROTO"),ee=Object.prototype,ne=$t?Object.getPrototypeOf:function(t){return t=Zt(t),E(t,te)?t[te]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ee:null},re=D("iterator"),ie=!1;[].keys&&("next"in(Lt=[].keys())?(At=ne(ne(Lt)))!==Object.prototype&&(Et=At):ie=!0),null==Et&&(Et={}),E(Et,re)||S(Et,re,(function(){return this}));var oe={IteratorPrototype:Et,BUGGY_SAFARI_ITERATORS:ie},ce=O.f,ue=D("toStringTag"),ae=function(t,e,n){t&&!E(t=n?t:t.prototype,ue)&&ce(t,ue,{configurable:!0,value:e})},se=oe.IteratorPrototype,fe=function(){return this},le=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return g(n),function(t){if(!p(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),he=oe.IteratorPrototype,pe=oe.BUGGY_SAFARI_ITERATORS,de=D("iterator"),ve=function(){return this},ye=Mt.set,me=Mt.getterFor("Array Iterator"),ge=function(t,e,n,r,i,o,c){!function(t,e,n){var r=e+" Iterator";t.prototype=ft(se,{next:j(1,n)}),ae(t,r,!1),dt[r]=fe}(n,e,r);var u,a,s,f=function(t){if(t===i&&v)return v;if(!pe&&t in p)return p[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},l=e+" Iterator",h=!1,p=t.prototype,d=p[de]||p["@@iterator"]||i&&p[i],v=!pe&&d||f(i),y="Array"==e&&p.entries||d;if(y&&(u=ne(y.call(new t)),he!==Object.prototype&&u.next&&(ne(u)!==he&&(le?le(u,he):"function"!=typeof u[de]&&S(u,de,ve)),ae(u,l,!0))),"values"==i&&d&&"values"!==d.name&&(h=!0,v=function(){return d.call(this)}),p[de]!==v&&S(p,de,v),dt[e]=v,i)if(a={values:f("values"),keys:o?v:f("keys"),entries:f("entries")},c)for(s in a)(pe||h||!(s in p))&&Dt(p,s,a[s]);else Qt({target:e,proto:!0,forced:pe||h},a);return a}(Array,"Array",(function(t,e){ye(this,{type:"Array Iterator",target:c(t),index:0,kind:e})}),(function(){var t=me(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");dt.Arguments=dt.Array,pt("keys"),pt("values"),pt("entries");var be,we,Oe=Array.isArray||function(t){return"Array"==n(t)},je=D("species"),Se=function(t,e){var n;return Oe(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Oe(n.prototype)?p(n)&&null===(n=n[je])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Te=function(t,e,n){var r=b(e);r in t?O.f(t,r,j(0,n)):t[r]=n},ke=nt("navigator","userAgent")||"",Pe=l.process,xe=Pe&&Pe.versions,Ee=xe&&xe.v8;Ee?we=(be=Ee.split("."))[0]+be[1]:ke&&(!(be=ke.match(/Edge\/(\d+)/))||be[1]>=74)&&(be=ke.match(/Chrome\/(\d+)/))&&(we=be[1]);var Ae=we&&+we,Le=D("species"),Me=Object.defineProperty,Ie={},Re=function(t){throw t},_e=function(e,n){if(E(Ie,e))return Ie[e];n||(n={});var r=[][e],i=!!E(n,"ACCESSORS")&&n.ACCESSORS,o=E(n,0)?n[0]:Re,c=E(n,1)?n[1]:void 0;return Ie[e]=!!r&&!t((function(){if(i&&!h)return!0;var t={length:-1};i?Me(t,1,{enumerable:!0,get:Re}):t[1]=1,r.call(t,o,c)}))},Ce=function(e){return Ae>=51||!t((function(){var t=[];return(t.constructor={})[Le]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}("splice"),qe=_e("splice",{ACCESSORS:!0,0:0,1:2}),De=Math.max,Fe=Math.min;Qt({target:"Array",proto:!0,forced:!Ce||!qe},{splice:function(t,e){var n,r,i,o,c,u,a=Zt(this),s=z(a.length),f=K(t,s),l=arguments.length;if(0===l?n=r=0:1===l?(n=0,r=s-f):(n=l-2,r=Fe(De(N(e),0),s-f)),s+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(i=Se(a,r),o=0;o<r;o++)(c=f+o)in a&&Te(i,o,a[c]);if(i.length=r,n<r){for(o=f;o<s-r;o++)u=o+n,(c=o+r)in a?a[u]=a[c]:delete a[u];for(o=s;o>s-r+n;o--)delete a[o-1]}else if(n>r)for(o=s-r;o>f;o--)u=o+n-1,(c=o+r-1)in a?a[u]=a[c]:delete a[u];for(o=0;o<n;o++)a[o+f]=arguments[o+2];return a.length=s-r+n,i}});var Ge={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ne=D("iterator"),Ve=D("toStringTag"),ze=ge.values;for(var Be in Ge){var He=l[Be],Ke=He&&He.prototype;if(Ke){if(Ke[Ne]!==ze)try{S(Ke,Ne,ze)}catch(t){Ke[Ne]=ze}if(Ke[Ve]||S(Ke,Ve,Be),Ge[Be])for(var Ue in ge)if(Ke[Ue]!==ge[Ue])try{S(Ke,Ue,ge[Ue])}catch(t){Ke[Ue]=ge[Ue]}}}var We=[];class Ye{static loop(t){for(var e of We)e(t);Ye.requestId=requestAnimationFrame(Ye.loop)}static start(){Ye.requestId=requestAnimationFrame(Ye.loop)}static subscribe(t){We.push(t)}static checkId(t){return We.every(e=>e.id!==t)}static unsubscribe(t){var e=We.findIndex(e=>e.id===t);-1!==e&&We.splice(e,1)}}Ye.start();var Xe=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t};function Je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Qe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(n),!0).forEach((function(e){Xe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}class Ze{constructor(t){if("object"==typeof t){var{frequency:e,run:n}=t;this.frequency=e||0,this.task=n}else"function"==typeof t&&(this.frequency=0,this.task=t);this.count=0}run(t){t.currentTime>=this.frequency*this.count&&(this.count++,this.task(Qe(Qe({},t),{},{count:this.count})))}}var $e=function(e,n){var r=[][e];return!!r&&t((function(){r.call(null,n||function(){throw 1},1)}))},tn=W.indexOf,en=[].indexOf,nn=!!en&&1/[1].indexOf(1,-0)<0,rn=$e("indexOf"),on=_e("indexOf",{ACCESSORS:!0,1:0});Qt({target:"Array",proto:!0,forced:nn||!rn||!on},{indexOf:function(t){return nn?en.apply(this,arguments)||0:tn(this,t,arguments.length>1?arguments[1]:void 0)}});var cn=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},un=[],an=un.sort,sn=t((function(){un.sort(void 0)})),fn=t((function(){un.sort(null)})),ln=$e("sort");Qt({target:"Array",proto:!0,forced:sn||!fn||!ln},{sort:function(t){return void 0===t?an.call(Zt(this)):an.call(Zt(this),cn(t))}});class hn{constructor(){this.list=[],this.index=0}add(t){this.list.push(t),this.list.sort((t,e)=>t.timestamp<e.timestamp?-1:t.timestamp>e.timestamp?1:0)}remove(t){var e=this.list.map(t=>t.id).indexOf(t);this.list.splice(e,0),this.index--}compare(t){this.list[this.index]&&this.list[this.index].currentTime<=t.currentTime&&(this.list[this.index].run(t),this.index++)}}var pn=l.Promise,dn=D("species"),vn=D("iterator"),yn=Array.prototype,mn=function(t,e,n){if(cn(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},gn={};gn[D("toStringTag")]="z";var bn="[object z]"===String(gn),wn=D("toStringTag"),On="Arguments"==n(function(){return arguments}()),jn=bn?n:function(t){var e,r,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),wn))?r:On?n(e):"Object"==(i=n(e))&&"function"==typeof e.callee?"Arguments":i},Sn=D("iterator"),Tn=function(t,e,n,r){try{return r?e(g(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&g(i.call(t)),e}},kn=a((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,n,r,i,o){var c,u,a,s,f,l,h,p,d=mn(n,r,i?2:1);if(o)c=t;else{if("function"!=typeof(u=function(t){if(null!=t)return t[Sn]||t["@@iterator"]||dt[jn(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(p=u)&&(dt.Array===p||yn[vn]===p)){for(a=0,s=z(t.length);s>a;a++)if((f=i?d(g(h=t[a])[0],h[1]):d(t[a]))&&f instanceof e)return f;return new e(!1)}c=u.call(t)}for(l=c.next;!(h=l.call(c)).done;)if("object"==typeof(f=Tn(c,d,h.value,i))&&f&&f instanceof e)return f;return new e(!1)}).stop=function(t){return new e(!0,t)}})),Pn=D("iterator"),xn=!1;try{var En=0,An={next:function(){return{done:!!En++}},return:function(){xn=!0}};An[Pn]=function(){return this},Array.from(An,(function(){throw 2}))}catch(t){}var Ln,Mn,In,Rn=D("species"),_n=/(iphone|ipod|ipad).*applewebkit/i.test(ke),Cn=l.location,qn=l.setImmediate,Dn=l.clearImmediate,Fn=l.process,Gn=l.MessageChannel,Nn=l.Dispatch,Vn=0,zn={},Bn=function(t){if(zn.hasOwnProperty(t)){var e=zn[t];delete zn[t],e()}},Hn=function(t){return function(){Bn(t)}},Kn=function(t){Bn(t.data)},Un=function(t){l.postMessage(t+"",Cn.protocol+"//"+Cn.host)};qn&&Dn||(qn=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return zn[++Vn]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Ln(Vn),Vn},Dn=function(t){delete zn[t]},"process"==n(Fn)?Ln=function(t){Fn.nextTick(Hn(t))}:Nn&&Nn.now?Ln=function(t){Nn.now(Hn(t))}:Gn&&!_n?(In=(Mn=new Gn).port2,Mn.port1.onmessage=Kn,Ln=mn(In.postMessage,In,1)):!l.addEventListener||"function"!=typeof postMessage||l.importScripts||t(Un)||"file:"===Cn.protocol?Ln="onreadystatechange"in y("script")?function(t){rt.appendChild(y("script")).onreadystatechange=function(){rt.removeChild(this),Bn(t)}}:function(t){setTimeout(Hn(t),0)}:(Ln=Un,l.addEventListener("message",Kn,!1)));var Wn,Yn,Xn,Jn,Qn,Zn,$n,tr,er={set:qn,clear:Dn},nr=qt.f,rr=er.set,ir=l.MutationObserver||l.WebKitMutationObserver,or=l.process,cr=l.Promise,ur="process"==n(or),ar=nr(l,"queueMicrotask"),sr=ar&&ar.value;sr||(Wn=function(){var t,e;for(ur&&(t=or.domain)&&t.exit();Yn;){e=Yn.fn,Yn=Yn.next;try{e()}catch(t){throw Yn?Jn():Xn=void 0,t}}Xn=void 0,t&&t.enter()},ur?Jn=function(){or.nextTick(Wn)}:ir&&!_n?(Qn=!0,Zn=document.createTextNode(""),new ir(Wn).observe(Zn,{characterData:!0}),Jn=function(){Zn.data=Qn=!Qn}):cr&&cr.resolve?($n=cr.resolve(void 0),tr=$n.then,Jn=function(){tr.call($n,Wn)}):Jn=function(){rr.call(l,Wn)});var fr,lr,hr,pr,dr=sr||function(t){var e={fn:t,next:void 0};Xn&&(Xn.next=e),Yn||(Yn=e,Jn()),Xn=e},vr=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=cn(e),this.reject=cn(n)},yr={f:function(t){return new vr(t)}},mr=function(t,e){if(g(t),p(e)&&e.constructor===t)return e;var n=yr.f(t);return(0,n.resolve)(e),n.promise},gr=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},br=er.set,wr=D("species"),Or="Promise",jr=Mt.get,Sr=Mt.set,Tr=Mt.getterFor(Or),kr=pn,Pr=l.TypeError,xr=l.document,Er=l.process,Ar=nt("fetch"),Lr=yr.f,Mr=Lr,Ir="process"==n(Er),Rr=!!(xr&&xr.createEvent&&l.dispatchEvent),_r=Xt(Or,(function(){if(!(bt(kr)!==String(kr))){if(66===Ae)return!0;if(!Ir&&"function"!=typeof PromiseRejectionEvent)return!0}if(Ae>=51&&/native code/.test(kr))return!1;var t=kr.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[wr]=e,!(t.then((function(){}))instanceof e)})),Cr=_r||!function(t,e){if(!e&&!xn)return!1;var n=!1;try{var r={};r[Pn]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}((function(t){kr.all(t).catch((function(){}))})),qr=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},Dr=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;dr((function(){for(var i=e.value,o=1==e.state,c=0;r.length>c;){var u,a,s,f=r[c++],l=o?f.ok:f.fail,h=f.resolve,p=f.reject,d=f.domain;try{l?(o||(2===e.rejection&&Vr(t,e),e.rejection=1),!0===l?u=i:(d&&d.enter(),u=l(i),d&&(d.exit(),s=!0)),u===f.promise?p(Pr("Promise-chain cycle")):(a=qr(u))?a.call(u,h,p):h(u)):p(i)}catch(t){d&&!s&&d.exit(),p(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&Gr(t,e)}))}},Fr=function(t,e,n){var r,i;Rr?((r=xr.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),l.dispatchEvent(r)):r={promise:e,reason:n},(i=l["on"+t])?i(r):"unhandledrejection"===t&&function(t,e){var n=l.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},Gr=function(t,e){br.call(l,(function(){var n,r=e.value;if(Nr(e)&&(n=gr((function(){Ir?Er.emit("unhandledRejection",r,t):Fr("unhandledrejection",t,r)})),e.rejection=Ir||Nr(e)?2:1,n.error))throw n.value}))},Nr=function(t){return 1!==t.rejection&&!t.parent},Vr=function(t,e){br.call(l,(function(){Ir?Er.emit("rejectionHandled",t):Fr("rejectionhandled",t,e.value)}))},zr=function(t,e,n,r){return function(i){t(e,n,i,r)}},Br=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,Dr(t,e,!0))},Hr=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw Pr("Promise can't be resolved itself");var i=qr(n);i?dr((function(){var r={done:!1};try{i.call(n,zr(Hr,t,r,e),zr(Br,t,r,e))}catch(n){Br(t,r,n,e)}})):(e.value=n,e.state=1,Dr(t,e,!1))}catch(n){Br(t,{done:!1},n,e)}}};function Kr(t,e,n,r,i,o,c){try{var u=t[o](c),a=u.value}catch(t){return void n(t)}u.done?e(a):Promise.resolve(a).then(r,i)}_r&&(kr=function(t){!function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}(this,kr,Or),cn(t),fr.call(this);var e=jr(this);try{t(zr(Hr,this,e),zr(Br,this,e))}catch(t){Br(this,e,t)}},(fr=function(t){Sr(this,{type:Or,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(t,e,n){for(var r in e)Dt(t,r,e[r],n);return t}(kr.prototype,{then:function(t,e){var n,r,i,o=Tr(this),c=Lr((n=kr,void 0===(i=g(this).constructor)||null==(r=g(i)[Rn])?n:cn(r)));return c.ok="function"!=typeof t||t,c.fail="function"==typeof e&&e,c.domain=Ir?Er.domain:void 0,o.parent=!0,o.reactions.push(c),0!=o.state&&Dr(this,o,!1),c.promise},catch:function(t){return this.then(void 0,t)}}),lr=function(){var t=new fr,e=jr(t);this.promise=t,this.resolve=zr(Hr,t,e),this.reject=zr(Br,t,e)},yr.f=Lr=function(t){return t===kr||t===hr?new lr(t):Mr(t)},"function"==typeof pn&&(pr=pn.prototype.then,Dt(pn.prototype,"then",(function(t,e){var n=this;return new kr((function(t,e){pr.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof Ar&&Qt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return mr(kr,Ar.apply(l,arguments))}}))),Qt({global:!0,wrap:!0,forced:_r},{Promise:kr}),ae(kr,Or,!1),function(t){var e=nt(t),n=O.f;h&&e&&!e[dn]&&n(e,dn,{configurable:!0,get:function(){return this}})}(Or),hr=nt(Or),Qt({target:Or,stat:!0,forced:_r},{reject:function(t){var e=Lr(this);return e.reject.call(void 0,t),e.promise}}),Qt({target:Or,stat:!0,forced:_r},{resolve:function(t){return mr(this,t)}}),Qt({target:Or,stat:!0,forced:Cr},{all:function(t){var e=this,n=Lr(e),r=n.resolve,i=n.reject,o=gr((function(){var n=cn(e.resolve),o=[],c=0,u=1;kn(t,(function(t){var a=c++,s=!1;o.push(void 0),u++,n.call(e,t).then((function(t){s||(s=!0,o[a]=t,--u||r(o))}),i)})),--u||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=Lr(e),r=n.reject,i=gr((function(){var i=cn(e.resolve);kn(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var Ur=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function c(t){Kr(o,r,i,c,u,"next",t)}function u(t){Kr(o,r,i,c,u,"throw",t)}c(void 0)}))}};class Wr{constructor(t){this.context=t,this.link=null}add(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>null,n=this.link;return this.link=new Promise(function(){var r=Ur((function*(r,i){yield n,yield new Promise(t).then(t=>{e(t),r()}).catch(t=>{console.error("Missing resolve in the request function."),e(t),i()})}));return function(t,e){return r.apply(this,arguments)}}()),this.context}}class Yr{constructor(t){this.context=t,this.temp=null,this.key=null,this.initial=0,this.timestamp=0}compare(t){this.key&&(null===this.temp&&(this.temp=t.currentTime+this.key.delay),null!==this.temp&&this.temp<=t.currentTime&&(this.key.callback(t),this.key=null,this.temp=null))}}class Xr{constructor(t){var{currentTime:e,globalTime:n}=t;this.currentTime=e,this.globalTime=n}}export default class{constructor(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:e,ratio:n,task:r}=t;this.id=(t=>t?Ye.checkId(t)?t:(console.error('ERROR: The "'.concat(t,'" id has already been defined. (Timeline Library)')),Date.now()):Date.now())(e),this.ratio=n||1,this.task=r?new Ze(r):null,this.keytime=new hn,this.chain=new Wr(this),this.util=new Yr(this),this.bank=0,this.initial=0,this.current=0,this.state="stop",Ye.subscribe(this.consume.bind(this))}consume(t){this.controller(t);var e=new Xr({currentTime:this.current,globalTime:t});this.util.compare(e),this.keytime.compare(e)}setId(t){t?Ye.checkId(t)?this.id=t:console.error('ERROR: The "'.concat(t,'" id has already been defined. (Timeline Library)')):console.error("ERROR: Please specify an id. (Timeline Library)")}setRatio(t){this.ratio=t}setTask(t){this.task=new Ze(t)}addKeytime(t){this.keytime.add(t)}removeKeytime(t){this.keytime.remove(t)}listKeytimes(){return this.keytime.list}controller(t){switch(this.initial||(this.initial=t),this.state){case"start":this.bank&&(this.initial+=this.bank,this.bank=null),this.current=(t-this.initial)*this.ratio,this.task&&this.task.run(new Xr({currentTime:this.current,globalTime:t}));break;case"stop":this.bank=(t-this.initial-this.current)*this.ratio;break;case"reset":this.state="stop",this.initial=0,this.current=0;break;default:console.error("Undefined state.")}}request(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return this.chain.add(((n,r)=>{this.util.key={delay:e,callback:e=>{this.state=t,n()}}}).bind(this),n)}start(t,e){return this.request("start",t,e)}stop(t,e){return this.request("stop",t,e)}reset(t,e){return this.request("reset",t,e)}delete(){Ye.unsubscribe(this.id)}}
